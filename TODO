#1 --------------------------------------------------------------------

 get more historic currency exchange rates, e.g.:

 http://www.oanda.com/currency/historical-rates-classic?date_fmt=us&date=05/16/13&date1=05/03/13&exch=EUR&expr=USD&margin_fixed=0&format=CSV&redirected=1
 http://www.xe.com/currencytables/?from=EUR&date=2013-05-16

 --------------------------------------------------------------------

#2 --------------------------------------------------------------------

validate transaction IDs against existing entries in the file, to
 - recognize cancellations etc to earlier transactions
 - avoid double bookings
 -> postpone for now for performance reasons; the hope is those cases
    are rare. at any rate, before annual closing, run full year paypal
	import and compare the gnc2csv outputs

 --------------------------------------------------------------------

#3 --------------------------------------------------------------------

The following transactions with reference have happened so far:

"Cancelled Fee" "Completed"
 - example:
    "PayPal"	      "Cancelled Fee"	"Completed"	"USD"	"0,39"	 "0,00"	"0,39"  -> here, ref tx points into nowhere. next TX is what fee gets refunded to
    "Phil Name"	      "Refund"	        "Completed"	"USD"	"-10,00" "0,39"	"-9,61"	-> here, ref tx points forward to original TX

   optional:
   "Reversal"	      "Update to Reversal"	"Canceled"	"USD"	"9,61"      "0,00"	"9,61"	-> here, ref tx points forward to temporary hold TX
   "Phil Name"		  "Temporary Hold"	    "Removed"	"USD"	"-10,00"	"0,39"	"-9,61"	-> here, ref tx points forward to original TX

 - original TX has: "Donations" "Refunded" -> keep this transaction
   as-is, and operate the cancelled fee / refund completed as partial
   reverts. usually, a refund has a net cost to the vendor
 -> collect various info above for given reference txn (simply join
    Cancelled Fee with next txn, since there is no valid ref), then
    amend original txn with inverse & the above collected info

"Correction" "Completed"
 - example:
    "PayPal"	"Correction"	"Completed"	"USD"	"0,82"	    "0,00"	"0,82"	 -> here, ref tx points forward to original TX

   -- or --

    "PayPal"	"Cancelled Fee"	"Completed"	"USD"	"0,69"	"0,00"	"0,69"	  -> here, ref tx points into nowhere. next TX is what fee gets refunded to

    "My Name"	"Reversal"	    "Completed"	"USD"	"-10,00"	"0,00"	"-10,00" -> here, ref tx points forward to original TX

 - original TX has: "Donations" "Reversed"
 -> collect various info above for given reference txn, then
    amend original txn with inverse & the above collected info

"Temporary Hold" "Placed
 - example:
   "WordPress.com"	"Preapproved Payment Sent"	"Completed"	"USD"	"-13,00"	"0,00"	"-13,00"	 -> here, ref tx points forward to original TX
   "PayPal"	"Temporary Hold"	"Placed"	"EUR"	"-10,07"	"0,00"   "-10,07"	 -> here, ref tx points forward to original TX
   "WordPress.com"	"Authorization"	"Completed"	"USD"	"-13,00"   "0,00"	"-13,00" -> the actual transaction

"Currency Conversion" "Completed" -> that is the std case, referencing forward to the original-currency transaction

Note that for _spending_ money, the currency conversion comes _after_
the actual transaction, Txn ref referencing backwards!

Other transactions (w/o references):

"Donation Received" "Completed"
"Donations" "Completed"

"Payment Received" "Completed" -> e.g. Flattr, normal TX
"Preapproved Payment Sent" "Completed" -> e.g. Facebook, normal TX
"Withdraw Funds to a Bank Account" "Completed" -> std money transfer

"Donations" "Cleared" -> echeck donation. ignore this one: "Update to eCheck Received" "Cleared"

"Donation Received" "Canceled" -> cancelled transaction, ignore
"Donations" "Canceled" -> cancelled transaction, ignore.
"Update to eCheck Received" "Canceled" -> cancelled transaction, ignore.

"Donations" "Pending" -> ignore, nothing happens
"Donations" "Uncleared" -> ignore, nothing happens

"Update to Bank Transfer Received" "Completed" -> money transfer finally ok, ignore

"Transfer" "Completed" -> transactions between currency accounts,
possibly consider the EUR side of the transaction, only

 --------------------------------------------------------------------

#5 --------------------------------------------------------------------

How a refund works:

For a random example: 2*5 EUR -> 13.04 USD go into USD account via
currency transfer, refund happens (4.80 USD net refund out, since
paypal refunds 0.20 USD of the fee), account has 8.24 USD left that
gets transferred out with 2SX902786T980344T

1M973519EV629601U yielded EUR 3,27, USD-EUR conversion balance is
-4.01, total balance is therefore -0.74 EUR

and: we should not ignore / revert refunded txn. seems we need them on
the plus side of the balance ;)

so, accounts involved:
0950 PayPal
3223 Geldzuwendungen ohne
2900-4 Sonstige Kosten

 --------------------------------------------------------------------
